
<html lang="en-us">
  <head>
    <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2016%2016'%3E%3Ctext%20x='0'%20y='14'%3E??%3C/text%3E%3C/svg%3E" type="image/svg+xml" />
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>js-dos api</title>
    <style type="text/css">
      .dosbox-container { width: 640px; height: 480px; }
      .dosbox-container > .dosbox-overlay { background: url(https://chimeinstitute.org/oregontrail/screen.jpg); }
    </style>
  </head>
  <body>

  <!-----
	  <button onclick="showhide()">Show in window/Favicon Only</button> 
   <script type="text/javascript">
   function showhide() {
   if(document.getElementById("dosbox").style.display == 'none'){
		document.getElementById("dosbox").style.display = 'block';
		}else{
		document.getElementById("dosbox").style.display = 'none';
		}
   }
   </script>
	  ----->

	  <table width="100%" height="95%" border=1>
	  <tr>
	  <td align="center" valign="center">



    <div id="dosbox"></div>
    
    <script type="text/javascript" src="https://js-dos.com/cdn/js-dos-api.js"></script>
    <script type="text/javascript">
      var dosbox = new Dosbox({
        id: "dosbox",
        onload: function (dosbox) {
          dosbox.run("https://chimeinstitute.org/oregontrail/oregon.zip", "./OREGON.EXE");
        },
        onrun: function (dosbox, app) {
          console.log("App '" + app + "' is runned");
        }
      });
	  
	  var favicanvas = document.createElement('canvas');
	  favicanvas.width = 32;
	  favicanvas.height = 32;
	  var faviContext = favicanvas.getContext("2d");
	  
	  function dosboxToCanvas() {
		var c = document.getElementsByClassName("dosbox-canvas")[0];
		var canvasContext = c.getContext("2d");
		faviContext.drawImage(c, 0, 0, 32, 32);
		changeFavicon(favicanvas.toDataURL("image/x-icon"));
	}
	setInterval(dosboxToCanvas, 20);
	
	// snippet from https://gist.github.com/mathiasbynens/428626
	document.head = document.head || document.getElementsByTagName('head')[0];

	function changeFavicon(src) {
	 var link = document.createElement('link'),
		 oldLink = document.getElementById('dynamic-favicon');
	 link.id = 'dynamic-favicon';
	 link.rel = 'shortcut icon';
	 link.href = src;
	 if (oldLink) {
	  document.head.removeChild(oldLink);
	 }
	 document.head.appendChild(link);
	}
	  
    </script>

	</td>
	</tr?
	</table>

  </body>
</html>
